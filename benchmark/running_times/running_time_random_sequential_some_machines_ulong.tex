%% SQL
%% drop view if exists p CASCADE;
%% create view p as
%% select * from sradixalgoswithips4oml
%% union
%% select * from scomparisonalgos
%% union
%% select * from sonlydoublealgoswithips4oml

%% SQL
%% drop view if exists sequ CASCADE;
%% create view sequ as
%% select * from avgsequential natural join p

%% SQL
%% drop view if exists saralgos CASCADE;
%% create view saralgos as
%% select machine, gen, datatype, algo, parallel, threads, vector, size, meminterleaved, copyback, milli
%% from sequ
%% where gen like 'random'
%% and algo not like 'blockquicksort'

%% SQL
%% drop view if exists saravg CASCADE;
%% create view saravg as
%% select machine, algo, size, datatype, AVG(milli) as milli
%% from saralgos
%% group by machine, algo, size, datatype

%% SQL
%% drop view if exists saravgnames CASCADE;
%% create view saravgnames as
%% select saravg.*, titles.title, titles.titleorder from saravg
%% inner join titles
%% on titles.algo like saravg.algo

\begin{figure}[tbp]
  \begin{tikzpicture}
    \begin{groupplot}[
      group style={
        group size=2 by 2,
        x descriptions at=edge bottom,
      },
      yticklabel style={
        /pgf/number format/fixed,
        /pgf/number format/precision=2
      },
      xlabel={Item count $n$},
      width=0.5\textwidth,
      height=0.25\textheight,
      xmode=log,
      xmin=2^8,
      xmax=2^32,
      log base x=2,
      ymin=0.0,
      ymax=6,
      restrict y to domain=-1:20,
      plotstylesequential,
      xmajorgrids=true,
      ymajorgrids=true,
      xtick={2^8, 2^12, 2^16, 2^20, 2^24, 2^28, 2^32},
      clip mode=individual,
      every axis title/.append style={yshift=-0.2cm},
      ]
      
      \nextgroupplot[
      title=\pcintellargefour,
      ytick={0, 0.1, 0.2, 0.3, 0.4},
      ymax=0.4]
      %% MULTIPLOT(algo|ptitle) select title as ptitle, size as x, 1000000.0 * milli / (8 * size * log(2, size)) as y, MULTIPLOT
      %% from saravgnames
      %% where machine like 'i10pc135' and datatype like 'uint64' and size >= 2^6
      %% and title not similar to '(\\compsyaros|\\compssort|\\compstim|\\compsmergequick|\\compswiki|\\radixlearned)'
      %% order by titleorder, x
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,1.14976) (128,1.29315) (256,2.02363) (512,1.1417) (1024,0.840642) (2048,0.727779) (4096,0.751972) (8192,0.684926) (16384,0.551837) (32768,0.523944) (65536,0.453278) (131072,0.394577) (262144,0.371652) (524288,0.352022) (1048576,0.32415) (2097152,0.316485) (4194304,0.300453) (8388608,0.213006) (16777216,0.168244) (33554432,0.160164) (67108864,0.158715) (1.34218e+08,0.15598) (2.68435e+08,0.152439) (5.36871e+08,0.149444) (1.07374e+09,0.14699) (2.14748e+09,0.144011) (4.29497e+09,0.145636) };
      \addlegendentry{\compissssort};
      \addplot coordinates { (64,1.36751) (128,1.06593) (256,1.09158) (512,0.755088) (1024,0.750206) (2048,0.68667) (4096,0.688589) (8192,0.591074) (16384,0.611425) (32768,0.496166) (65536,0.490534) (131072,0.46882) (262144,0.412481) (524288,0.392223) (1048576,0.370611) (2097152,0.357297) (4194304,0.301244) (8388608,0.208155) (16777216,0.199218) (33554432,0.189915) (67108864,0.188592) (1.34218e+08,0.185549) (2.68435e+08,0.184791) (5.36871e+08,0.184739) (1.07374e+09,0.185755) (2.14748e+09,0.182089) (4.29497e+09,0.189783) };
      \addlegendentry{\compspdq};
      \addplot coordinates { (64,1.05585) (128,1.08924) (256,1.42478) (512,1.07077) (1024,0.999721) (2048,0.844383) (4096,0.616791) (8192,0.582899) (16384,0.573521) (32768,0.588888) (65536,0.470333) (131072,0.429274) (262144,0.416212) (524288,0.40279) (1048576,0.382021) (2097152,0.377657) (4194304,0.303796) (8388608,0.252388) (16777216,0.235147) (33554432,0.21753) (67108864,0.20893) (1.34218e+08,0.203801) (2.68435e+08,0.240902) (5.36871e+08,0.230137) (1.07374e+09,0.210617) (2.14748e+09,0.208141) (4.29497e+09,0.233279) };
      \addlegendentry{\compmyssssaxtmann};
      \addplot coordinates { (64,1.38525) (128,1.19408) (256,0.85825) (512,1.03957) (1024,0.620392) (2048,0.569404) (4096,0.516322) (8192,0.513315) (16384,0.656841) (32768,0.588335) (65536,0.425203) (131072,0.372447) (262144,0.316557) (524288,0.282404) (1048576,0.276134) (2097152,0.291607) (4194304,0.234424) (8388608,0.195331) (16777216,0.155355) (33554432,0.133235) (67108864,0.133546) (1.34218e+08,0.128655) (2.68435e+08,0.134707) (5.36871e+08,0.144747) (1.07374e+09,0.153358) (2.14748e+09,0.151127) (4.29497e+09,0.134134) };
      \addlegendentry{\radixsska};
      \addplot coordinates { (64,7.60091) (128,3.34332) (256,2.24955) (512,1.11378) (1024,0.670844) (2048,0.500267) (4096,0.48955) (8192,0.470376) (16384,0.386288) (32768,0.347177) (65536,0.369591) (131072,0.376853) (262144,0.358747) (524288,0.32209) (1048576,0.330675) (2097152,0.345299) (4194304,0.348612) (8388608,0.268075) (16777216,0.269584) (33554432,0.246084) (67108864,0.238944) (1.34218e+08,0.232773) (2.68435e+08,0.279099) (5.36871e+08,0.227839) (1.07374e+09,0.222638) (2.14748e+09,0.21636) (4.29497e+09,0.214004) };
      \addlegendentry{\radixipp};
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,1.39946) (128,1.34699) (256,0.853877) (512,0.944503) (1024,0.799152) (2048,0.640124) (4096,0.502388) (8192,0.539107) (16384,0.441084) (32768,0.591649) (65536,0.463993) (131072,0.326079) (262144,0.287973) (524288,0.260781) (1048576,0.248589) (2097152,0.248195) (4194304,0.248133) (8388608,0.173458) (16777216,0.144539) (33554432,0.121237) (67108864,0.113938) (1.34218e+08,0.113509) (2.68435e+08,0.114578) (5.36871e+08,0.115779) (1.07374e+09,0.115719) (2.14748e+09,0.12632) (4.29497e+09,0.121633) };
      \addlegendentry{\compissrsort};

      \legend{}
      
    % (Relative) Coordinate at top of the first plot
    \coordinate (c1) at (rel axis cs:0,1);
      
      \nextgroupplot[
      title=\pcamd,
      ytick={0, 0.05, 0.1, 0.15, 0.2, 0.25},
      ymax=0.25]
      %% MULTIPLOT(algo|ptitle) select title as ptitle, size as x, 1000000.0 * milli / (8 * size * log(2, size)) as y, MULTIPLOT
      %% from saravgnames
      %% where machine like 'i10pc133' and datatype like 'uint64' and size >= 2^6
      %% and title not similar to '(\\compsyaros|\\compssort|\\compstim|\\compsmergequick|\\compswiki|\\radixlearned)'
      %% order by titleorder, x
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.74428) (128,0.536003) (256,0.676274) (512,0.756398) (1024,0.367536) (2048,0.515125) (4096,0.239508) (8192,0.258407) (16384,0.336261) (32768,0.229807) (65536,0.227671) (131072,0.14885) (262144,0.159373) (524288,0.169622) (1048576,0.159855) (2097152,0.14931) (4194304,0.143125) (8388608,0.13717) (16777216,0.130808) (33554432,0.126433) (67108864,0.122626) (1.34218e+08,0.124482) (2.68435e+08,0.118572) (5.36871e+08,0.123356) (1.07374e+09,0.116059) (2.14748e+09,0.120094) };
      \addlegendentry{\compissssort};
      \addplot coordinates { (64,0.652251) (128,0.556292) (256,0.431763) (512,0.445803) (1024,0.29296) (2048,0.362646) (4096,0.359496) (8192,0.20877) (16384,0.252761) (32768,0.337357) (65536,0.240757) (131072,0.18592) (262144,0.215125) (524288,0.206421) (1048576,0.202786) (2097152,0.189497) (4194304,0.182902) (8388608,0.185154) (16777216,0.181421) (33554432,0.175136) (67108864,0.179841) (1.34218e+08,0.170909) (2.68435e+08,0.180246) (5.36871e+08,0.180651) (1.07374e+09,0.171988) (2.14748e+09,0.172723) };
      \addlegendentry{\compspdq};
      \addplot coordinates { (64,0.768276) (128,0.898547) (256,0.871892) (512,0.577664) (1024,0.419216) (2048,0.285401) (4096,0.353481) (8192,0.321489) (16384,0.197482) (32768,0.29357) (65536,0.202689) (131072,0.186651) (262144,0.190072) (524288,0.199986) (1048576,0.189347) (2097152,0.181319) (4194304,0.173756) (8388608,0.162909) (16777216,0.157308) (33554432,0.152265) (67108864,0.151591) (1.34218e+08,0.152685) (2.68435e+08,0.152966) (5.36871e+08,0.152963) (1.07374e+09,0.14821) (2.14748e+09,0.155386) };
      \addlegendentry{\compmyssssaxtmann};
      \addplot coordinates { (64,0.5246) (128,0.392947) (256,0.464351) (512,0.293676) (1024,0.205045) (2048,0.300635) (4096,0.320207) (8192,0.322949) (16384,0.374882) (32768,0.293708) (65536,0.170069) (131072,0.139956) (262144,0.164222) (524288,0.138128) (1048576,0.136582) (2097152,0.146441) (4194304,0.155535) (8388608,0.150743) (16777216,0.124998) (33554432,0.107487) (67108864,0.106354) (1.34218e+08,0.102657) (2.68435e+08,0.105732) (5.36871e+08,0.125014) (1.07374e+09,0.125126) (2.14748e+09,0.131148) };
      \addlegendentry{\radixsska};
      \addplot coordinates { (64,2.12058) (128,1.11597) (256,0.739829) (512,0.481048) (1024,0.302874) (2048,0.246219) (4096,0.253354) (8192,0.264926) (16384,0.214301) (32768,0.176891) (65536,0.234112) (131072,0.19887) (262144,0.26632) (524288,0.255334) (1048576,0.25002) (2097152,0.244816) (4194304,0.235699) (8388608,0.228127) (16777216,0.210169) (33554432,0.195939) (67108864,0.191119) (1.34218e+08,0.187634) (2.68435e+08,0.19227) (5.36871e+08,0.176331) (1.07374e+09,0.173297) (2.14748e+09,0.169963) };
      \addlegendentry{\radixipp};
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.649461) (128,0.854781) (256,0.645957) (512,0.524455) (1024,0.432171) (2048,0.314601) (4096,0.178747) (8192,0.14829) (16384,0.161558) (32768,0.209692) (65536,0.135832) (131072,0.158687) (262144,0.126578) (524288,0.0995219) (1048576,0.0912238) (2097152,0.0967977) (4194304,0.110997) (8388608,0.115789) (16777216,0.0946506) (33554432,0.0784626) (67108864,0.0798878) (1.34218e+08,0.0780728) (2.68435e+08,0.0712355) (5.36871e+08,0.0757543) (1.07374e+09,0.089386) (2.14748e+09,0.0939736) };
      \addlegendentry{\compissrsort};

      \legend{}
      
    % (Relative) Coordinate at top of the second plot
    \coordinate (c2) at (rel axis cs:1,1);
      
      \nextgroupplot[
      every axis y label/.append style={at=(ticklabel cs:1.1)},
      ylabel={Running time / $n\log_2 n$},
      y unit=ns,
      title=\pcinteltwo,
      ytick={0, 0.1, 0.2, 0.3, 0.4, 0.5},
      ymax=0.5]
      %% MULTIPLOT(algo|ptitle) select title as ptitle, size as x, 1000000.0 * milli / (8 * size * log(2, size)) as y, MULTIPLOT
      %% from saravgnames
      %% where machine like 'i10pc132' and datatype like 'uint64' and size >= 2^6
      %% and title not similar to '(\\compsyaros|\\compssort|\\compstim|\\compsmergequick|\\compswiki|\\radixlearned)'
      %% order by titleorder, x
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.864211) (128,0.950275) (256,1.11536) (512,0.745991) (1024,0.624922) (2048,0.545261) (4096,0.517786) (8192,0.418697) (16384,0.399581) (32768,0.366038) (65536,0.349314) (131072,0.336995) (262144,0.329805) (524288,0.316604) (1048576,0.308613) (2097152,0.299532) (4194304,0.291947) (8388608,0.288269) (16777216,0.283139) (33554432,0.278301) (67108864,0.275169) (1.34218e+08,0.30795) (2.68435e+08,0.311053) (5.36871e+08,0.260297) (1.07374e+09,0.297205) (2.14748e+09,0.257755) (4.29497e+09,0.254458) };
      \addlegendentry{\compissssort};
      \addplot coordinates { (64,0.918969) (128,0.769422) (256,0.668989) (512,0.586298) (1024,0.531287) (2048,0.475224) (4096,0.441144) (8192,0.418697) (16384,0.40098) (32768,0.387106) (65536,0.372581) (131072,0.366065) (262144,0.355182) (524288,0.346411) (1048576,0.341523) (2097152,0.334604) (4194304,0.329586) (8388608,0.326677) (16777216,0.321043) (33554432,0.316193) (67108864,0.313943) (1.34218e+08,0.31458) (2.68435e+08,0.357422) (5.36871e+08,0.308128) (1.07374e+09,0.338798) (2.14748e+09,0.32005) (4.29497e+09,0.333222) };
      \addlegendentry{\compspdq};
      \addplot coordinates { (64,0.891369) (128,0.91186) (256,1.09879) (512,0.65723) (1024,0.570203) (2048,0.489024) (4096,0.441287) (8192,0.40834) (16384,0.392707) (32768,0.407113) (65536,0.396882) (131072,0.371801) (262144,0.371841) (524288,0.354142) (1048576,0.35132) (2097152,0.351218) (4194304,0.38786) (8388608,0.39622) (16777216,0.385629) (33554432,0.379289) (67108864,0.363855) (1.34218e+08,0.401062) (2.68435e+08,0.404182) (5.36871e+08,0.418078) (1.07374e+09,0.416767) (2.14748e+09,0.400867) (4.29497e+09,0.378837) };
      \addlegendentry{\compmyssssaxtmann};
      \addplot coordinates { (64,1.04422) (128,0.853835) (256,0.645573) (512,0.937488) (1024,0.435519) (2048,0.359205) (4096,0.352774) (8192,0.363898) (16384,0.377079) (32768,0.388412) (65536,0.326021) (131072,0.281138) (262144,0.260677) (524288,0.226451) (1048576,0.23017) (2097152,0.247119) (4194304,0.26024) (8388608,0.27186) (16777216,0.236842) (33554432,0.20582) (67108864,0.190282) (1.34218e+08,0.172738) (2.68435e+08,0.231404) (5.36871e+08,0.195807) (1.07374e+09,0.220901) (2.14748e+09,0.246188) (4.29497e+09,0.199694) };
      \addlegendentry{\radixsska};
      \addplot coordinates { (64,5.48677) (128,2.60791) (256,1.30886) (512,0.768167) (1024,0.492455) (2048,0.433472) (4096,0.519312) (8192,0.583868) (16384,0.601029) (32768,0.712664) (65536,0.654207) (131072,0.607144) (262144,0.568891) (524288,0.546103) (1048576,0.538488) (2097152,0.545281) (4194304,0.730905) (8388608,0.755697) (16777216,0.734659) (33554432,0.712585) (67108864,0.696758) (1.34218e+08,0.696629) (2.68435e+08,0.724506) (5.36871e+08,0.718547) (1.07374e+09,0.756894) (2.14748e+09,0.703487) (4.29497e+09,0.696186) };
      \addlegendentry{\radixipp};
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.977539) (128,0.777573) (256,0.696786) (512,0.858092) (1024,0.599892) (2048,1.81634) (4096,0.981774) (8192,0.647243) (16384,0.504669) (32768,0.443255) (65536,0.369342) (131072,0.284863) (262144,0.260097) (524288,0.269411) (1048576,0.275538) (2097152,0.27599) (4194304,0.269273) (8388608,0.292639) (16777216,0.264311) (33554432,0.226344) (67108864,0.209633) (1.34218e+08,0.220743) (2.68435e+08,0.23707) (5.36871e+08,0.228059) (1.07374e+09,0.256864) (2.14748e+09,0.286926) (4.29497e+09,0.231782) };
      \addlegendentry{\compissrsort};

      \legend{}

      \nextgroupplot[
      title=\pcintelfour,
      every legend/.append style={at=(ticklabel cs:1.1)},
      legend style={at={($(0,0)+(1cm,1cm)$)},legend columns=6,fill=none,draw=black,anchor=center,align=center},
      legend to name=legendplots,
      ytick={0, 0.1, 0.2, 0.3},
      ymax=0.3
      ]
      %% MULTIPLOT(algo|ptitle) select title as ptitle, size as x, 1000000.0 * milli / (8 * size * log(2, size)) as y, MULTIPLOT
      %% from saravgnames
      %% where machine like 'i10pc136' and datatype like 'uint64' and size >= 2^6
      %% and title not similar to '(\\compsyaros|\\compssort|\\compstim|\\compsmergequick|\\compswiki|\\radixlearned)'
      %% order by titleorder, x
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.871001) (128,0.824996) (256,0.800306) (512,1.03546) (1024,0.656217) (2048,0.469769) (4096,0.354652) (8192,0.293186) (16384,0.24192) (32768,0.255995) (65536,0.209812) (131072,0.192365) (262144,0.184016) (524288,0.177692) (1048576,0.176731) (2097152,0.174702) (4194304,0.169889) (8388608,0.16501) (16777216,0.161812) (33554432,0.158193) (67108864,0.153619) (1.34218e+08,0.150039) (2.68435e+08,0.14782) (5.36871e+08,0.145886) (1.07374e+09,0.14449) (2.14748e+09,0.142448) (4.29497e+09,0.140402) };
      \addlegendentry{\compissssort};
      \addplot coordinates { (64,0.656622) (128,0.524554) (256,0.444074) (512,0.415729) (1024,0.344992) (2048,0.337406) (4096,0.289371) (8192,0.277325) (16384,0.262122) (32768,0.270019) (65536,0.241766) (131072,0.232824) (262144,0.225926) (524288,0.222701) (1048576,0.219199) (2097152,0.21148) (4194304,0.206972) (8388608,0.202487) (16777216,0.198618) (33554432,0.197019) (67108864,0.19133) (1.34218e+08,0.185447) (2.68435e+08,0.182099) (5.36871e+08,0.178841) (1.07374e+09,0.175621) (2.14748e+09,0.174435) (4.29497e+09,0.172366) };
      \addlegendentry{\compspdq};
      \addplot coordinates { (64,0.810361) (128,0.821429) (256,0.814789) (512,0.923462) (1024,0.585788) (2048,0.492001) (4096,0.3782) (8192,0.356136) (16384,0.302767) (32768,0.280694) (65536,0.255296) (131072,0.246974) (262144,0.242808) (524288,0.239534) (1048576,0.233329) (2097152,0.222986) (4194304,0.219405) (8388608,0.214707) (16777216,0.209043) (33554432,0.205183) (67108864,0.197476) (1.34218e+08,0.190162) (2.68435e+08,0.185385) (5.36871e+08,0.183575) (1.07374e+09,0.182761) (2.14748e+09,0.182653) (4.29497e+09,0.1821) };
      \addlegendentry{\compmyssssaxtmann};
      \addplot coordinates { (64,0.670805) (128,0.605778) (256,0.407244) (512,0.35376) (1024,0.287238) (2048,0.241347) (4096,0.252691) (8192,0.279809) (16384,0.289294) (32768,0.282957) (65536,0.209818) (131072,0.180197) (262144,0.174975) (524288,0.159689) (1048576,0.163621) (2097152,0.179972) (4194304,0.198977) (8388608,0.194196) (16777216,0.161602) (33554432,0.140922) (67108864,0.129714) (1.34218e+08,0.117194) (2.68435e+08,0.117969) (5.36871e+08,0.122011) (1.07374e+09,0.137949) (2.14748e+09,0.132501) (4.29497e+09,0.110063) };
      \addlegendentry{\radixsska};
      \addplot coordinates { (64,3.9186) (128,2.08858) (256,1.07654) (512,0.670428) (1024,0.471458) (2048,0.383338) (4096,0.323092) (8192,0.311123) (16384,0.287431) (32768,0.277198) (65536,0.262155) (131072,0.262401) (262144,0.249586) (524288,0.239699) (1048576,0.253016) (2097152,0.267696) (4194304,0.261285) (8388608,0.267688) (16777216,0.267031) (33554432,0.254437) (67108864,0.235432) (1.34218e+08,0.219222) (2.68435e+08,0.216483) (5.36871e+08,0.208355) (1.07374e+09,0.20365) (2.14748e+09,0.189603) (4.29497e+09,0.174241) };
      \addlegendentry{\radixipp};
      \addplot+[on layer=foreground, mark layer=foreground] coordinates { (64,0.672201) (128,0.574398) (256,0.519161) (512,0.833562) (1024,0.546498) (2048,0.418144) (4096,0.31679) (8192,0.227728) (16384,0.234829) (32768,0.232124) (65536,0.180815) (131072,0.152889) (262144,0.14009) (524288,0.123653) (1048576,0.109473) (2097152,0.112512) (4194304,0.130048) (8388608,0.138564) (16777216,0.11759) (33554432,0.105249) (67108864,0.101509) (1.34218e+08,0.0889344) (2.68435e+08,0.0807658) (5.36871e+08,0.0839186) (1.07374e+09,0.0988583) (2.14748e+09,0.106465) (4.29497e+09,0.0925938) };
      \addlegendentry{\compissrsort};

    \end{groupplot}
    \coordinate (c3) at ($(c1)!.5!(c2)$);
    \node[below] at (c3 |- current bounding box.south)
    {\pgfplotslegendfromname{legendplots}};
  \end{tikzpicture}
  \caption{
    Running times of sequential algorithms of \ulong values with input distribution \distuniform executed on different machines.
    The results of \compsyaros, \compssort, \compstim, \compsmergequick, \compswiki, and \radixlearned cannot be seen as their running times exceed the plot.
  }\label{fig:rt seq ulong}
\end{figure}
